<div class="container mt-4">
  <h2 class="text-danger text-center mb-4">Search Results</h2>

  <!-- Filters -->
  <div class="d-flex justify-content-end mb-3" >
    <select class="form-select w-auto" [(ngModel)]="sortOption" (change)="sortResults()">
      <option value="" selected disabled>Sort by</option>
      <option value="priceAsc">ğŸ’µ Price: Low to High</option>
      <option value="priceDesc">ğŸ’µ Price: High to Low</option>
      <option value="dateAsc">ğŸ“… Date: Earliest</option>
      <option value="dateDesc">ğŸ“… Date: Latest</option>
    </select>
  </div>

  <!-- Flights -->
  <div class="accordion mb-3" id="resultsAccordion" >
    <div class="accordion-item" *ngIf="transportation === 'Flight'">
      <h2 class="accordion-header" id="headingFlights">
        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFlights">
          âœˆï¸ Flights ({{ flightList.length }})
        </button>
      </h2>
      <div id="collapseFlights" class="accordion-collapse collapse show">
        <div class="accordion-body">
          <div *ngIf="flightList.length === 0" class="alert alert-info">No flights found.</div>
          <div *ngFor="let flight of flightList" class="card mb-3 shadow-sm">
            <div class="card-body">
              <h5 class="card-title">{{ flight.flightNumber }} - {{ flight.totalSeats }}</h5>
              <p>
                ğŸ›« From: {{ flight.departureAirportName }}<br>
                ğŸ›¬ To: {{ flight.arrivalAirportName }}<br>
                ğŸ“… {{ flight.travelDate | date:'mediumDate' }}<br>
                ğŸ’µ {{ flight.price | currency:'USD' }}
              </p>
              <button class="btn btn-primary w-100" routerLink="/finalBooking/{{flight.id}}">Book Now</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Trains -->
    <div class="accordion-item" *ngIf="transportation === 'Train'">
      <h2 class="accordion-header" id="headingTrains">
        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTrains">
          ğŸš† Trains ({{ trainList.length }})
        </button>
      </h2>
      <div id="collapseTrains" class="accordion-collapse collapse">
        <div class="accordion-body">
          <div *ngFor="let train of trainList" class="card mb-3 shadow-sm">
            <div class="card-body">
              <h5 class="card-title">{{ train.trainName }} ({{ train.trainNo }})</h5>
              <p>
                ğŸ From: {{ train.departureStationName }}<br>
                ğŸ¯ To: {{ train.arrivalStationName }}<br>
                ğŸ“… {{ train.departureDate | date:'mediumDate' }}<br>
                ğŸ’µ {{ train.price | currency:'USD' }}
              </p>
              <button class="btn btn-success w-100" routerLink="/trainBooking/{{train.id}}">Book Now</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Cars -->
    <div class="accordion-item" *ngIf="transportation === 'Cars'">
      <h2 class="accordion-header" id="headingCars">
        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseCars">
          ğŸš— Cars ({{ carList.length }})
        </button>
      </h2>
      <div id="collapseCars" class="accordion-collapse collapse" >
        <div class="accordion-body">
          <div *ngIf="carList.length === 0" class="alert alert-info">No cars found.</div>
          <div *ngFor="let car of carList" class="card mb-3 shadow-sm d-flex align-items-center">
            <img [src]="car.carImage" alt="Car" width="120" class="me-3 rounded">
            <div class="card-body">
              <h5 class="card-title">{{ car.brand }} {{ car.model }} ({{ car.year }})</h5>
              <p>
                ğŸ¨ {{ car.color }}<br>
                ğŸ”¢ {{ car.regNo }}<br>
                ğŸ’µ {{ car.dailyRate | currency:'USD' }}
              </p>
              <button class="btn btn-warning w-100" routerLink="/carsBooking/{{car.id}}">Book Now</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
